var gulp=require("gulp"),imageResize=require("gulp-image-resize"),rename=require("gulp-rename"),browserSync=require("browser-sync").create(),eslint=require("gulp-eslint"),jasmine=require("gulp-jasmine-phantom"),debug=require("gulp-debug"),concat=require("gulp-concat"),sass=require("gulp-sass"),autoprefixer=require("gulp-autoprefixer"),uglifyes=require("uglify-es"),composer=require("gulp-uglify/composer"),uglify=composer(uglifyes,console),sourcemaps=require("gulp-sourcemaps");const imagemin=require("gulp-imagemin"),imageminPngquant=require("imagemin-pngquant");gulp.task("build",["generate-images","copy-json","copy-html","styles","scripts"]),gulp.task("copy-json",function(){gulp.src(["data/restaurants.json"]).pipe(gulp.dest("dist/data/"))}),gulp.task("copy-html",function(){gulp.src(["**/*.html","!node_modules/**/*","!server/**/*","!dist/**/*"]).pipe(gulp.dest("dist"))}),gulp.task("watch:html",function(){gulp.watch(["**/*.html","!node_modules/**/*","!server/**/*","!dist/**/*"],["copy-html"])}),gulp.task("generate-images",function(){gulp.src("img/**/*.{jpg,png}").pipe(imageResize({width:350})).pipe(imagemin({progressive:!0,use:[imageminPngquant()]})).pipe(rename(function(e){e.basename+="-small"})).pipe(gulp.dest("dist/img")),gulp.src("img/**/*.{jpg,png}").pipe(imageResize({width:640})).pipe(imagemin({progressive:!0,use:[imageminPngquant()]})).pipe(rename(function(e){e.basename+="-medium"})).pipe(gulp.dest("dist/img")),gulp.src("img/**/*.{jpg,png}").pipe(imagemin({progressive:!0,use:[imageminPngquant()]})).pipe(gulp.dest("dist/img"))}),gulp.task("minify",function(){gulp.src(["**/*.js","!spec/**/*.js","!node_modules/**/*","!server/**/*","!dist/**/*"]).pipe(sourcemaps.init()).pipe(uglify().on("error",function(e){console.log(e)})).pipe(sourcemaps.write()).pipe(gulp.dest("dist"))}),gulp.task("lint",function(){return gulp.src(["**/*.js","!node_modules/**/*","!server/**/*","!dist/**/*"]).pipe(eslint()).pipe(eslint.format()).pipe(eslint.failOnError())}),gulp.task("scripts",["lint","minify"]),gulp.task("watch:js",function(){gulp.watch(["**/*.js","!node_modules/**/*","!server/**/*","!dist/**/*"],["scripts"])}),gulp.task("styles",function(){gulp.src("sass/**/main.scss").pipe(sass({outputStyle:"compressed"}).on("error",sass.logError)).pipe(autoprefixer({browsers:["last 2 versions","ie 8","ie 9"]})).pipe(gulp.dest("dist/css"))}),gulp.task("watch:css",function(){gulp.watch("sass/**/*.scss",["styles"])}),gulp.task("tests",function(){gulp.src(["spec/**/*.js"]).pipe(debug()).pipe(jasmine({verbose:!0,integration:!0,vendor:["js/**/*.js"]}))}),gulp.task("default",["build","watch:html","watch:css","watch:js"],function(){browserSync.init({server:{baseDir:"./dist"},serveStaticOptions:{extensions:["html","json","css","js"]},port:8e3}),gulp.watch(["dist/**/*"]).on("change",browserSync.reload)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImd1bHBmaWxlLmpzIl0sIm5hbWVzIjpbImd1bHAiLCJyZXF1aXJlIiwiaW1hZ2VSZXNpemUiLCJyZW5hbWUiLCJicm93c2VyU3luYyIsImNyZWF0ZSIsImVzbGludCIsImphc21pbmUiLCJkZWJ1ZyIsImNvbmNhdCIsInNhc3MiLCJhdXRvcHJlZml4ZXIiLCJ1Z2xpZnllcyIsImNvbXBvc2VyIiwidWdsaWZ5IiwiY29uc29sZSIsInNvdXJjZW1hcHMiLCJpbWFnZW1pbiIsImltYWdlbWluUG5ncXVhbnQiLCJ0YXNrIiwic3JjIiwicGlwZSIsImRlc3QiLCJ3YXRjaCIsIndpZHRoIiwicHJvZ3Jlc3NpdmUiLCJ1c2UiLCJwYXRoIiwiYmFzZW5hbWUiLCJpbml0Iiwib24iLCJlIiwibG9nIiwid3JpdGUiLCJmb3JtYXQiLCJmYWlsT25FcnJvciIsIm91dHB1dFN0eWxlIiwibG9nRXJyb3IiLCJicm93c2VycyIsInZlcmJvc2UiLCJpbnRlZ3JhdGlvbiIsInZlbmRvciIsInNlcnZlciIsImJhc2VEaXIiLCJzZXJ2ZVN0YXRpY09wdGlvbnMiLCJleHRlbnNpb25zIiwicG9ydCIsInJlbG9hZCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsS0FBT0MsUUFBUSxRQUNmQyxZQUFjRCxRQUFRLHFCQUN0QkUsT0FBU0YsUUFBUSxlQUNqQkcsWUFBY0gsUUFBUSxnQkFBZ0JJLFNBQ3RDQyxPQUFTTCxRQUFRLGVBQ2pCTSxRQUFVTixRQUFRLHdCQUNsQk8sTUFBUVAsUUFBUSxjQUNoQlEsT0FBU1IsUUFBUSxlQUNqQlMsS0FBT1QsUUFBUSxhQUNmVSxhQUFlVixRQUFRLHFCQUN2QlcsU0FBV1gsUUFBUSxhQUNuQlksU0FBV1osUUFBUSx3QkFDbkJhLE9BQVNELFNBQVNELFNBQVVHLFNBQzVCQyxXQUFhZixRQUFRLG1CQUN6QixNQUFNZ0IsU0FBV2hCLFFBQVEsaUJBQ25CaUIsaUJBQW1CakIsUUFBUSxxQkFFakNELEtBQUttQixLQUFLLFNBQVUsa0JBQW1CLFlBQWEsWUFBYSxTQUFVLFlBRTNFbkIsS0FBS21CLEtBQUssWUFBYSxXQUNuQm5CLEtBQUtvQixLQUFLLDBCQUNMQyxLQUFLckIsS0FBS3NCLEtBQUssaUJBRXhCdEIsS0FBS21CLEtBQUssWUFBYSxXQUNuQm5CLEtBQUtvQixLQUFLLFlBQWEscUJBQXNCLGVBQWUsZUFDdkRDLEtBQUtyQixLQUFLc0IsS0FBSyxXQUV4QnRCLEtBQUttQixLQUFLLGFBQWMsV0FDcEJuQixLQUFLdUIsT0FDRCxZQUNBLHFCQUFzQixlQUFlLGVBQ3JDLGdCQUVSdkIsS0FBS21CLEtBQUssa0JBQW1CLFdBQ3pCbkIsS0FBS29CLElBQUksc0JBQ0pDLEtBQUtuQixhQUNGc0IsTUFBTyxPQUVWSCxLQUFLSixVQUNGUSxhQUFhLEVBQ2JDLEtBQU1SLHVCQUVURyxLQUFLbEIsT0FBTyxTQUFVd0IsR0FDbkJBLEVBQUtDLFVBQVksWUFFcEJQLEtBQUtyQixLQUFLc0IsS0FBSyxhQUNwQnRCLEtBQUtvQixJQUFJLHNCQUNKQyxLQUFLbkIsYUFDRnNCLE1BQU8sT0FFVkgsS0FBS0osVUFDRlEsYUFBYSxFQUNiQyxLQUFNUix1QkFFVEcsS0FBS2xCLE9BQU8sU0FBVXdCLEdBQ25CQSxFQUFLQyxVQUFZLGFBRXBCUCxLQUFLckIsS0FBS3NCLEtBQUssYUFDcEJ0QixLQUFLb0IsSUFBSSxzQkFDSkMsS0FBS0osVUFDRlEsYUFBYSxFQUNiQyxLQUFNUix1QkFFVEcsS0FBS3JCLEtBQUtzQixLQUFLLGVBRXhCdEIsS0FBS21CLEtBQUssU0FBVSxXQUNoQm5CLEtBQUtvQixLQUFLLFVBQVUsZ0JBQWdCLHFCQUFzQixlQUFlLGVBQ3BFQyxLQUFLTCxXQUFXYSxRQUVoQlIsS0FBS1AsU0FBU2dCLEdBQUcsUUFBUyxTQUFTQyxHQUNoQ2hCLFFBQVFpQixJQUFJRCxNQUVmVixLQUFLTCxXQUFXaUIsU0FDaEJaLEtBQUtyQixLQUFLc0IsS0FBSyxXQUV4QnRCLEtBQUttQixLQUFLLE9BQVEsV0FDZCxPQUFPbkIsS0FBS29CLEtBQUssVUFBVyxxQkFBc0IsZUFBZSxlQUM1REMsS0FBS2YsVUFDTGUsS0FBS2YsT0FBTzRCLFVBQ1piLEtBQUtmLE9BQU82QixpQkFFckJuQyxLQUFLbUIsS0FBSyxXQUFZLE9BQVEsV0FDOUJuQixLQUFLbUIsS0FBSyxXQUFZLFdBQ2xCbkIsS0FBS3VCLE9BQ0QsVUFDQSxxQkFBc0IsZUFBZSxlQUNyQyxjQUdSdkIsS0FBS21CLEtBQUssU0FBVSxXQUNoQm5CLEtBQUtvQixJQUFJLHFCQUNKQyxLQUFLWCxNQUNGMEIsWUFBZSxlQUNoQk4sR0FBRyxRQUFTcEIsS0FBSzJCLFdBQ25CaEIsS0FBS1YsY0FDRjJCLFVBQVcsa0JBQW1CLE9BQVEsV0FFekNqQixLQUFLckIsS0FBS3NCLEtBQUssZUFFeEJ0QixLQUFLbUIsS0FBSyxZQUFhLFdBQ25CbkIsS0FBS3VCLE1BQU0sa0JBQW1CLGFBR2xDdkIsS0FBS21CLEtBQUssUUFBUyxXQUVmbkIsS0FBS29CLEtBQUssaUJBQ0xDLEtBQUtiLFNBQ0xhLEtBQUtkLFNBQ0ZnQyxTQUFTLEVBQ1RDLGFBQWEsRUFDYkMsUUFBUyxtQkFNckJ6QyxLQUFLbUIsS0FBSyxXQUFZLFFBQVEsYUFBYyxZQUFhLFlBQWEsV0FDbEVmLFlBQVl5QixNQUNSYSxRQUNJQyxRQUFTLFVBRWJDLG9CQUNJQyxZQUFhLE9BQU8sT0FBTyxNQUFNLE9BRXJDQyxLQUFNLE1BRVY5QyxLQUFLdUIsT0FBTyxjQUNQTyxHQUFHLFNBQVUxQixZQUFZMkMiLCJmaWxlIjoiZ3VscGZpbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZ3VscCA9IHJlcXVpcmUoJ2d1bHAnKTtcclxudmFyIGltYWdlUmVzaXplID0gcmVxdWlyZSgnZ3VscC1pbWFnZS1yZXNpemUnKTtcclxudmFyIHJlbmFtZSA9IHJlcXVpcmUoJ2d1bHAtcmVuYW1lJyk7XHJcbnZhciBicm93c2VyU3luYyA9IHJlcXVpcmUoJ2Jyb3dzZXItc3luYycpLmNyZWF0ZSgpO1xyXG52YXIgZXNsaW50ID0gcmVxdWlyZSgnZ3VscC1lc2xpbnQnKTtcclxudmFyIGphc21pbmUgPSByZXF1aXJlKCdndWxwLWphc21pbmUtcGhhbnRvbScpO1xyXG52YXIgZGVidWcgPSByZXF1aXJlKCdndWxwLWRlYnVnJyk7XHJcbnZhciBjb25jYXQgPSByZXF1aXJlKCdndWxwLWNvbmNhdCcpO1xyXG52YXIgc2FzcyA9IHJlcXVpcmUoJ2d1bHAtc2FzcycpO1xyXG52YXIgYXV0b3ByZWZpeGVyID0gcmVxdWlyZSgnZ3VscC1hdXRvcHJlZml4ZXInKTtcclxudmFyIHVnbGlmeWVzID0gcmVxdWlyZSgndWdsaWZ5LWVzJyk7XHJcbnZhciBjb21wb3NlciA9IHJlcXVpcmUoJ2d1bHAtdWdsaWZ5L2NvbXBvc2VyJyk7XHJcbnZhciB1Z2xpZnkgPSBjb21wb3Nlcih1Z2xpZnllcywgY29uc29sZSk7XHJcbnZhciBzb3VyY2VtYXBzID0gcmVxdWlyZSgnZ3VscC1zb3VyY2VtYXBzJyk7XHJcbmNvbnN0IGltYWdlbWluID0gcmVxdWlyZSgnZ3VscC1pbWFnZW1pbicpO1xyXG5jb25zdCBpbWFnZW1pblBuZ3F1YW50ID0gcmVxdWlyZSgnaW1hZ2VtaW4tcG5ncXVhbnQnKTtcclxuXHJcbmd1bHAudGFzaygnYnVpbGQnLCBbJ2dlbmVyYXRlLWltYWdlcycsICdjb3B5LWpzb24nLCAnY29weS1odG1sJywgJ3N0eWxlcycsICdzY3JpcHRzJ10pO1xyXG5cclxuZ3VscC50YXNrKCdjb3B5LWpzb24nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBndWxwLnNyYyhbJ2RhdGEvcmVzdGF1cmFudHMuanNvbiddKVxyXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdCgnZGlzdC9kYXRhLycpKTtcclxufSk7XHJcbmd1bHAudGFzaygnY29weS1odG1sJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZ3VscC5zcmMoWycqKi8qLmh0bWwnLCAnIW5vZGVfbW9kdWxlcy8qKi8qJywgJyFzZXJ2ZXIvKiovKicsJyFkaXN0LyoqLyonXSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoJ2Rpc3QnKSk7XHJcbn0pO1xyXG5ndWxwLnRhc2soJ3dhdGNoOmh0bWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBndWxwLndhdGNoKFtcclxuICAgICAgICAnKiovKi5odG1sJyxcclxuICAgICAgICAnIW5vZGVfbW9kdWxlcy8qKi8qJywgJyFzZXJ2ZXIvKiovKicsJyFkaXN0LyoqLyonXHJcbiAgICBdLCBbJ2NvcHktaHRtbCddKTtcclxufSk7XHJcbmd1bHAudGFzaygnZ2VuZXJhdGUtaW1hZ2VzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZ3VscC5zcmMoJ2ltZy8qKi8qLntqcGcscG5nfScpXHJcbiAgICAgICAgLnBpcGUoaW1hZ2VSZXNpemUoe1xyXG4gICAgICAgICAgICB3aWR0aDogMzUwXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLnBpcGUoaW1hZ2VtaW4oe1xyXG4gICAgICAgICAgICBwcm9ncmVzc2l2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgdXNlOiBbaW1hZ2VtaW5QbmdxdWFudCgpXVxyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIC5waXBlKHJlbmFtZShmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgICAgICBwYXRoLmJhc2VuYW1lICs9ICctc21hbGwnO1xyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdCgnZGlzdC9pbWcnKSk7XHJcbiAgICBndWxwLnNyYygnaW1nLyoqLyoue2pwZyxwbmd9JylcclxuICAgICAgICAucGlwZShpbWFnZVJlc2l6ZSh7XHJcbiAgICAgICAgICAgIHdpZHRoOiA2NDBcclxuICAgICAgICB9KSlcclxuICAgICAgICAucGlwZShpbWFnZW1pbih7XHJcbiAgICAgICAgICAgIHByb2dyZXNzaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICB1c2U6IFtpbWFnZW1pblBuZ3F1YW50KCldXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLnBpcGUocmVuYW1lKGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgICAgIHBhdGguYmFzZW5hbWUgKz0gJy1tZWRpdW0nO1xyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIC5waXBlKGd1bHAuZGVzdCgnZGlzdC9pbWcnKSk7XHJcbiAgICBndWxwLnNyYygnaW1nLyoqLyoue2pwZyxwbmd9JylcclxuICAgICAgICAucGlwZShpbWFnZW1pbih7XHJcbiAgICAgICAgICAgIHByb2dyZXNzaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICB1c2U6IFtpbWFnZW1pblBuZ3F1YW50KCldXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KCdkaXN0L2ltZycpKTtcclxufSk7XHJcbmd1bHAudGFzaygnbWluaWZ5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgZ3VscC5zcmMoWycqKi8qLmpzJywnIXNwZWMvKiovKi5qcycsJyFub2RlX21vZHVsZXMvKiovKicsICchc2VydmVyLyoqLyonLCchZGlzdC8qKi8qJ10pXHJcbiAgICAgICAgLnBpcGUoc291cmNlbWFwcy5pbml0KCkpICAgIFxyXG4gICAgICAgIC8vLnBpcGUoY29uY2F0KCdtYWluLmpzJykpXHJcbiAgICAgICAgLnBpcGUodWdsaWZ5KCkub24oJ2Vycm9yJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIC5waXBlKHNvdXJjZW1hcHMud3JpdGUoKSlcclxuICAgICAgICAucGlwZShndWxwLmRlc3QoJ2Rpc3QnKSk7XHJcbn0pO1xyXG5ndWxwLnRhc2soJ2xpbnQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZ3VscC5zcmMoWycqKi8qLmpzJywgJyFub2RlX21vZHVsZXMvKiovKicsICchc2VydmVyLyoqLyonLCchZGlzdC8qKi8qJ10pXHJcbiAgICAgICAgLnBpcGUoZXNsaW50KCkpXHJcbiAgICAgICAgLnBpcGUoZXNsaW50LmZvcm1hdCgpKVxyXG4gICAgICAgIC5waXBlKGVzbGludC5mYWlsT25FcnJvcigpKTtcclxufSk7XHJcbmd1bHAudGFzaygnc2NyaXB0cycsIFsnbGludCcsICdtaW5pZnknXSk7XHJcbmd1bHAudGFzaygnd2F0Y2g6anMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBndWxwLndhdGNoKFtcclxuICAgICAgICAnKiovKi5qcycsXHJcbiAgICAgICAgJyFub2RlX21vZHVsZXMvKiovKicsICchc2VydmVyLyoqLyonLCchZGlzdC8qKi8qJ1xyXG4gICAgXSwgWydzY3JpcHRzJ10pO1xyXG59KTtcclxuXHJcbmd1bHAudGFzaygnc3R5bGVzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZ3VscC5zcmMoJ3Nhc3MvKiovbWFpbi5zY3NzJylcclxuICAgICAgICAucGlwZShzYXNzKHtcclxuICAgICAgICAgICAgJ291dHB1dFN0eWxlJzogJ2NvbXByZXNzZWQnXHJcbiAgICAgICAgfSkub24oJ2Vycm9yJywgc2Fzcy5sb2dFcnJvcikpXHJcbiAgICAgICAgLnBpcGUoYXV0b3ByZWZpeGVyKHtcclxuICAgICAgICAgICAgYnJvd3NlcnM6IFsnbGFzdCAyIHZlcnNpb25zJywgJ2llIDgnLCAnaWUgOSddXHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgLnBpcGUoZ3VscC5kZXN0KCdkaXN0L2NzcycpKTtcclxufSk7XHJcbmd1bHAudGFzaygnd2F0Y2g6Y3NzJywgZnVuY3Rpb24gKCkge1xyXG4gICAgZ3VscC53YXRjaCgnc2Fzcy8qKi8qLnNjc3MnLCBbJ3N0eWxlcyddKTtcclxufSk7XHJcblxyXG5ndWxwLnRhc2soJ3Rlc3RzJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGd1bHAuc3JjKFsnc3BlYy8qKi8qLmpzJ10pXHJcbiAgICAgICAgLnBpcGUoZGVidWcoKSlcclxuICAgICAgICAucGlwZShqYXNtaW5lKHtcclxuICAgICAgICAgICAgdmVyYm9zZTogdHJ1ZSxcclxuICAgICAgICAgICAgaW50ZWdyYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIHZlbmRvcjogWydqcy8qKi8qLmpzJ11cclxuICAgICAgICB9KSk7XHJcblxyXG59KTtcclxuXHJcbi8vIFN0YXRpYyBzZXJ2ZXJcclxuZ3VscC50YXNrKCdkZWZhdWx0JywgWydidWlsZCcsJ3dhdGNoOmh0bWwnLCAnd2F0Y2g6Y3NzJywgJ3dhdGNoOmpzJ10sIGZ1bmN0aW9uICgpIHtcclxuICAgIGJyb3dzZXJTeW5jLmluaXQoe1xyXG4gICAgICAgIHNlcnZlcjoge1xyXG4gICAgICAgICAgICBiYXNlRGlyOiAnLi9kaXN0J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VydmVTdGF0aWNPcHRpb25zOiB7XHJcbiAgICAgICAgICAgIGV4dGVuc2lvbnM6IFsnaHRtbCcsJ2pzb24nLCdjc3MnLCdqcyddXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwb3J0OiA4MDAwXHJcbiAgICB9KTtcclxuICAgIGd1bHAud2F0Y2goWydkaXN0LyoqLyonIF0pXHJcbiAgICAgICAgLm9uKCdjaGFuZ2UnLCBicm93c2VyU3luYy5yZWxvYWQpO1xyXG59KTsiXX0=
