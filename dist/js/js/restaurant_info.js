let restaurant;var map;window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})});const fetchRestaurantFromURL=e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");if(t)DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)});else{e("No restaurant id in URL",null)}},fillRestaurantHTML=(e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img");t.setAttribute("alt",`This is a representative image of the restaurant ${e.name}`),t.title=`${e.name}`,t.className="restaurant-img";const n=DBHelper.imageUrlForRestaurant(e);t.src=n,t.srcset=`${n.slice(0,n.lastIndexOf("."))}-small${n.slice(n.lastIndexOf("."))} 320w,\n                                    ${n.slice(0,n.lastIndexOf("."))}-medium${n.slice(n.lastIndexOf("."))} 640w,\n                                    ${n} 800w`,t.sizes="(max-width: 800px) 100vw, 800px",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=(e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let n in e){const a=document.createElement("tr"),r=document.createElement("th");r.innerHTML=n,a.appendChild(r);const s=document.createElement("td");s.innerHTML=e[n],a.appendChild(s),t.appendChild(a)}},fillReviewsHTML=(e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=e=>{const t=document.createElement("li");t.setAttribute("tabindex","0");const n=document.createElement("p");n.classList.add("name"),n.innerHTML=e.name,t.appendChild(n);const a=document.createElement("p");a.classList.add("date"),a.innerHTML=e.date,t.appendChild(a);const r=document.createElement("p");r.innerHTML=`Rating: ${e.rating}`,r.classList.add("rating"),t.appendChild(r);const s=document.createElement("p");return s.innerHTML=e.comments,t.appendChild(s),t},fillBreadcrumb=(e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li"),a=document.createElement("a");a.setAttribute("disabled","disabled"),a.innerHTML=e.name,a.href="#",a.setAttribute("aria-current","page"),n.appendChild(a),t.appendChild(n)},getParameterByName=(e,t)=>{t||(t=window.location.href),e=e.replace(/[[]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3Jlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibWFwIiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwibGF0bG5nIiwic2Nyb2xsd2hlZWwiLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJpbWFnZSIsInNldEF0dHJpYnV0ZSIsInRpdGxlIiwiY2xhc3NOYW1lIiwiaW1hZ2VTcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJzcmMiLCJzcmNzZXQiLCJzbGljZSIsImxhc3RJbmRleE9mIiwic2l6ZXMiLCJjdWlzaW5lX3R5cGUiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsImZpbGxSZXZpZXdzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJrZXkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiZGF5IiwiYXBwZW5kQ2hpbGQiLCJ0aW1lIiwicmV2aWV3cyIsImNvbnRhaW5lciIsIm5vUmV2aWV3cyIsInVsIiwiZm9yRWFjaCIsInJldmlldyIsImNyZWF0ZVJldmlld0hUTUwiLCJsaSIsImNsYXNzTGlzdCIsImFkZCIsImRhdGUiLCJyYXRpbmciLCJjb21tZW50cyIsImJyZWFkY3J1bWIiLCJhIiwiaHJlZiIsInVybCIsImxvY2F0aW9uIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50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TW1DLEVBQU9sRCxTQUFTb0MsY0FBYyxLQUNwQ2MsRUFBS0YsVUFBVUMsSUFBSSxRQUNuQkMsRUFBS3BDLFVBQVkrQixFQUFPSyxLQUN4QkgsRUFBR1QsWUFBWVksR0FFZixNQUFNQyxFQUFTbkQsU0FBU29DLGNBQWMsS0FDdENlLEVBQU9yQyxxQkFBdUIrQixFQUFPTSxTQUNyQ0EsRUFBT0gsVUFBVUMsSUFBSSxVQUNyQkYsRUFBR1QsWUFBWWEsR0FFZixNQUFNQyxFQUFXcEQsU0FBU29DLGNBQWMsS0FJeEMsT0FIQWdCLEVBQVN0QyxVQUFZK0IsRUFBT08sU0FDNUJMLEVBQUdULFlBQVljLEdBRVJMLEdBTUx6QyxlQUFpQixDQUFDakIsRUFBV08sS0FBS1AsY0FDcEMsTUFBTWdFLEVBQWFyRCxTQUFTQyxlQUFlLGNBQ3JDOEMsRUFBSy9DLFNBQVNvQyxjQUFjLE1BQzVCa0IsRUFBSXRELFNBQVNvQyxjQUFjLEtBRWpDa0IsRUFBRXBDLGFBQWEsV0FBVyxZQUMxQm9DLEVBQUV4QyxVQUFZekIsRUFBVzBCLEtBQ3pCdUMsRUFBRUMsS0FBSyxJQUNQRCxFQUFFcEMsYUFBYSxlQUFlLFFBRTlCNkIsRUFBR1QsWUFBWWdCLEdBRWZELEVBQVdmLFlBQVlTLElBTXJCcEMsbUJBQXFCLENBQUNJLEVBQU15QyxLQUN6QkEsSUFDREEsRUFBTWpFLE9BQU9rRSxTQUFTRixNQUMxQnhDLEVBQU9BLEVBQUsyQyxRQUFRLFFBQVMsUUFDN0IsTUFDSUMsRUFEVSxJQUFJQyxjQUFjN0Msc0JBQ1o4QyxLQUFLTCxHQUN6QixPQUFLRyxFQUVBQSxFQUFRLEdBRU5HLG1CQUFtQkgsRUFBUSxHQUFHRCxRQUFRLE1BQU8sTUFEekMsR0FGQSIsImZpbGUiOiJqcy9yZXN0YXVyYW50X2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBnb29nbGUgREJIZWxwZXIqL1xyXG5sZXQgcmVzdGF1cmFudDtcclxudmFyIG1hcDtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICAgIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgICAgICAgICAgICAgem9vbTogMTYsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmaWxsQnJlYWRjcnVtYigpO1xyXG4gICAgICAgICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cclxuICovXHJcbmNvbnN0IGZldGNoUmVzdGF1cmFudEZyb21VUkwgPSAoY2FsbGJhY2spID0+IHtcclxuICAgIGlmIChzZWxmLnJlc3RhdXJhbnQpIHsgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xyXG4gICAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcclxuICAgICAgICBjb25zdCBlcnJvciA9ICdObyByZXN0YXVyYW50IGlkIGluIFVSTCdcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xyXG4gICAgICAgICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxyXG4gKi9cclxuY29uc3QgZmlsbFJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcclxuICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XHJcbiAgICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuXHJcbiAgICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtYWRkcmVzcycpO1xyXG4gICAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcblxyXG4gICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcclxuICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JyxgVGhpcyBpcyBhIHJlcHJlc2VudGF0aXZlIGltYWdlIG9mIHRoZSByZXN0YXVyYW50ICR7cmVzdGF1cmFudC5uYW1lfWApO1xyXG4gICAgaW1hZ2UudGl0bGU9YCR7cmVzdGF1cmFudC5uYW1lfWA7XHJcbiAgICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXHJcbiAgICBjb25zdCBpbWFnZVNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICAgIGltYWdlLnNyYyA9IGltYWdlU3JjO1xyXG4gICAgXHJcbiAgICBpbWFnZS5zcmNzZXQgPSBgJHtpbWFnZVNyYy5zbGljZSgwLCBpbWFnZVNyYy5sYXN0SW5kZXhPZignLicpKX0tc21hbGwke2ltYWdlU3JjLnNsaWNlKGltYWdlU3JjLmxhc3RJbmRleE9mKCcuJykpfSAzMjB3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2ltYWdlU3JjLnNsaWNlKDAsIGltYWdlU3JjLmxhc3RJbmRleE9mKCcuJykpfS1tZWRpdW0ke2ltYWdlU3JjLnNsaWNlKGltYWdlU3JjLmxhc3RJbmRleE9mKCcuJykpfSA2NDB3LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2ltYWdlU3JjfSA4MDB3YDtcclxuICAgIGltYWdlLnNpemVzID0gYChtYXgtd2lkdGg6IDgwMHB4KSAxMDB2dywgODAwcHhgO1xyXG5cclxuICAgIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XHJcbiAgICBjdWlzaW5lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuY3Vpc2luZV90eXBlO1xyXG5cclxuICAgIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXHJcbiAgICBpZiAocmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpIHtcclxuICAgICAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xyXG4gICAgfVxyXG4gICAgLy8gZmlsbCByZXZpZXdzXHJcbiAgICBmaWxsUmV2aWV3c0hUTUwoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5jb25zdCBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCA9IChvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpID0+IHtcclxuICAgIGNvbnN0IGhvdXJzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaG91cnMnKTtcclxuICAgIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xyXG4gICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XHJcbiAgICAgICAgZGF5LmlubmVySFRNTCA9IGtleTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoZGF5KTtcclxuXHJcbiAgICAgICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICAgICAgdGltZS5pbm5lckhUTUwgPSBvcGVyYXRpbmdIb3Vyc1trZXldO1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcclxuXHJcbiAgICAgICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNvbnN0IGZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpID0+IHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWNvbnRhaW5lcicpO1xyXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gICAgdGl0bGUuaW5uZXJIVE1MID0gJ1Jldmlld3MnO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgICBpZiAoIXJldmlld3MpIHtcclxuICAgICAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgbm9SZXZpZXdzLmlubmVySFRNTCA9ICdObyByZXZpZXdzIHlldCEnO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub1Jldmlld3MpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xyXG4gICAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XHJcbiAgICAgICAgdWwuYXBwZW5kQ2hpbGQoY3JlYXRlUmV2aWV3SFRNTChyZXZpZXcpKTtcclxuICAgIH0pO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXZpZXcgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuY29uc3QgY3JlYXRlUmV2aWV3SFRNTCA9IChyZXZpZXcpID0+IHtcclxuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgIGxpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCcwJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBuYW1lLmNsYXNzTGlzdC5hZGQoJ25hbWUnKTtcclxuICAgIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XHJcbiAgICBsaS5hcHBlbmRDaGlsZChuYW1lKTtcclxuXHJcbiAgICBjb25zdCBkYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgZGF0ZS5jbGFzc0xpc3QuYWRkKCdkYXRlJyk7XHJcbiAgICBkYXRlLmlubmVySFRNTCA9IHJldmlldy5kYXRlO1xyXG4gICAgbGkuYXBwZW5kQ2hpbGQoZGF0ZSk7XHJcblxyXG4gICAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgcmF0aW5nLmlubmVySFRNTCA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xyXG4gICAgcmF0aW5nLmNsYXNzTGlzdC5hZGQoJ3JhdGluZycpO1xyXG4gICAgbGkuYXBwZW5kQ2hpbGQocmF0aW5nKTtcclxuXHJcbiAgICBjb25zdCBjb21tZW50cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcclxuICAgIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcclxuXHJcbiAgICByZXR1cm4gbGk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxyXG4gKi9cclxuY29uc3QgZmlsbEJyZWFkY3J1bWIgPSAocmVzdGF1cmFudD1zZWxmLnJlc3RhdXJhbnQpID0+IHtcclxuICAgIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xyXG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIFxyXG4gICAgYS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywnZGlzYWJsZWQnKTtcclxuICAgIGEuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gICAgYS5ocmVmPScjJztcclxuICAgIGEuc2V0QXR0cmlidXRlKCdhcmlhLWN1cnJlbnQnLCdwYWdlJyk7XHJcblxyXG4gICAgbGkuYXBwZW5kQ2hpbGQoYSk7XHJcbiAgICBcclxuICAgIGJyZWFkY3J1bWIuYXBwZW5kQ2hpbGQobGkpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cclxuICovXHJcbmNvbnN0IGdldFBhcmFtZXRlckJ5TmFtZSA9IChuYW1lLCB1cmwpID0+IHtcclxuICAgIGlmICghdXJsKVxyXG4gICAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1tdXS9nLCAnXFxcXCQmJyk7XHJcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcclxuICAgICAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xyXG4gICAgaWYgKCFyZXN1bHRzKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgaWYgKCFyZXN1bHRzWzJdKVxyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XHJcbn1cclxuIl19
