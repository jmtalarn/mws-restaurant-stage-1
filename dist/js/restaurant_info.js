let restaurant;var map;window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})});const fetchRestaurantFromURL=e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");if(t)DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)});else{e("No restaurant id in URL",null)}},fillRestaurantHTML=(e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img");t.setAttribute("alt",`This is a representative image of the restaurant ${e.name}`),t.title=`${e.name}`,t.className="restaurant-img";const n=DBHelper.imageUrlForRestaurant(e);t.src=n,/\.svg$/.test(n)||(t.srcset=`${n}-small.jpg 320w,\n                                        ${n}-medium.jpg 640w,\n                                        ${n}.jpg 800w`,t.sizes="(max-width: 800px) 100vw, 800px"),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=(e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let n in e){const a=document.createElement("tr"),r=document.createElement("th");r.innerHTML=n,a.appendChild(r);const s=document.createElement("td");s.innerHTML=e[n],a.appendChild(s),t.appendChild(a)}},fillReviewsHTML=(e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=e=>{const t=document.createElement("li");t.setAttribute("tabindex","0");const n=document.createElement("p");n.classList.add("name"),n.innerHTML=e.name,t.appendChild(n);const a=document.createElement("p");a.classList.add("date"),a.innerHTML=e.date,t.appendChild(a);const r=document.createElement("p");r.innerHTML=`Rating: ${e.rating}`,r.classList.add("rating"),t.appendChild(r);const s=document.createElement("p");return s.innerHTML=e.comments,t.appendChild(s),t},fillBreadcrumb=(e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li"),a=document.createElement("a");a.setAttribute("disabled","disabled"),a.innerHTML=e.name,a.href="#",a.setAttribute("aria-current","page"),n.appendChild(a),t.appendChild(n)},getParameterByName=(e,t)=>{t||(t=window.location.href),e=e.replace(/[[]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3Jlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibWFwIiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwibGF0bG5nIiwic2Nyb2xsd2hlZWwiLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJpbWFnZSIsInNldEF0dHJpYnV0ZSIsInRpdGxlIiwiY2xhc3NOYW1lIiwiaW1hZ2VTcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJzcmMiLCJ0ZXN0Iiwic3Jjc2V0Iiwic2l6ZXMiLCJjdWlzaW5lX3R5cGUiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCIsImZpbGxSZXZpZXdzSFRNTCIsIm9wZXJhdGluZ0hvdXJzIiwiaG91cnMiLCJrZXkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiZGF5IiwiYXBwZW5kQ2hpbGQiLCJ0aW1lIiwicmV2aWV3cyIsImNvbnRhaW5lciIsIm5vUmV2aWV3cyIsInVsIiwiZm9yRWFjaCIsInJldmlldyIsImNyZWF0ZVJldmlld0hUTUwiLCJsaSIsImNsYXNzTGlzdCIsImFkZCIsImRhdGUiLCJyYXRpbmciLCJjb21tZW50cyIsImJyZWFkY3J1bWIiLCJhIiwiaHJlZiIsInVybCIsImxvY2F0aW9uIiwicmVwbGFjZSIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwiZGVjb2RlVVJJQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoi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QVNtQyxjQUFjLEtBQ3RDZSxFQUFPcEMscUJBQXVCOEIsRUFBT00sU0FDckNBLEVBQU9ILFVBQVVDLElBQUksVUFDckJGLEVBQUdULFlBQVlhLEdBRWYsTUFBTUMsRUFBV25ELFNBQVNtQyxjQUFjLEtBSXhDLE9BSEFnQixFQUFTckMsVUFBWThCLEVBQU9PLFNBQzVCTCxFQUFHVCxZQUFZYyxHQUVSTCxHQU1MeEMsZUFBaUIsQ0FBQ2pCLEVBQVdPLEtBQUtQLGNBQ3BDLE1BQU0rRCxFQUFhcEQsU0FBU0MsZUFBZSxjQUNyQzZDLEVBQUs5QyxTQUFTbUMsY0FBYyxNQUM1QmtCLEVBQUlyRCxTQUFTbUMsY0FBYyxLQUVqQ2tCLEVBQUVuQyxhQUFhLFdBQVcsWUFDMUJtQyxFQUFFdkMsVUFBWXpCLEVBQVcwQixLQUN6QnNDLEVBQUVDLEtBQUssSUFDUEQsRUFBRW5DLGFBQWEsZUFBZSxRQUU5QjRCLEVBQUdULFlBQVlnQixHQUVmRCxFQUFXZixZQUFZUyxJQU1yQm5DLG1CQUFxQixDQUFDSSxFQUFNd0MsS0FDekJBLElBQ0RBLEVBQU1oRSxPQUFPaUUsU0FBU0YsTUFDMUJ2QyxFQUFPQSxFQUFLMEMsUUFBUSxRQUFTLFFBQzdCLE1BQ0lDLEVBRFUsSUFBSUMsY0FBYzVDLHNCQUNaNkMsS0FBS0wsR0FDekIsT0FBS0csRUFFQUEsRUFBUSxHQUVORyxtQkFBbUJILEVBQVEsR0FBR0QsUUFBUSxNQUFPLE1BRHpDLEdBRkEiLCJmaWxlIjoianMvcmVzdGF1cmFudF9pbmZvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypnbG9iYWwgZ29vZ2xlIERCSGVscGVyKi9cclxubGV0IHJlc3RhdXJhbnQ7XHJcbnZhciBtYXA7XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxyXG4gKi9cclxud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xyXG4gICAgICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuICAgICAgICAgICAgICAgIHpvb206IDE2LFxyXG4gICAgICAgICAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcclxuICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcclxuICAgICAgICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXHJcbiAqL1xyXG5jb25zdCBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gKGNhbGxiYWNrKSA9PiB7XHJcbiAgICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxyXG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHNlbGYucmVzdGF1cmFudClcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcclxuICAgIGlmICghaWQpIHsgLy8gbm8gaWQgZm91bmQgaW4gVVJMXHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnXHJcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcclxuICAgICAgICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcclxuICAgICAgICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKTtcclxuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2VcclxuICovXHJcbmNvbnN0IGZpbGxSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XHJcbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xyXG4gICAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcblxyXG4gICAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcclxuICAgIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xyXG5cclxuICAgIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJyk7XHJcbiAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsYFRoaXMgaXMgYSByZXByZXNlbnRhdGl2ZSBpbWFnZSBvZiB0aGUgcmVzdGF1cmFudCAke3Jlc3RhdXJhbnQubmFtZX1gKTtcclxuICAgIGltYWdlLnRpdGxlPWAke3Jlc3RhdXJhbnQubmFtZX1gO1xyXG4gICAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcclxuICAgIGNvbnN0IGltYWdlU3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG5cclxuICAgIGltYWdlLnNyYyA9IGltYWdlU3JjO1xyXG4gICAgaWYgKCEvXFwuc3ZnJC8udGVzdChpbWFnZVNyYykpeyAgICBcclxuICAgICAgICBpbWFnZS5zcmNzZXQgPSBgJHtpbWFnZVNyY30tc21hbGwuanBnIDMyMHcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2ltYWdlU3JjfS1tZWRpdW0uanBnIDY0MHcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke2ltYWdlU3JjfS5qcGcgODAwd2A7XHJcbiAgICAgICAgaW1hZ2Uuc2l6ZXMgPSAnKG1heC13aWR0aDogODAwcHgpIDEwMHZ3LCA4MDBweCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xyXG4gICAgY3Vpc2luZS5pbm5lckhUTUwgPSByZXN0YXVyYW50LmN1aXNpbmVfdHlwZTtcclxuXHJcbiAgICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xyXG4gICAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XHJcbiAgICAgICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcclxuICAgIH1cclxuICAgIC8vIGZpbGwgcmV2aWV3c1xyXG4gICAgZmlsbFJldmlld3NIVE1MKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMgSFRNTCB0YWJsZSBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuY29uc3QgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwgPSAob3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSA9PiB7XHJcbiAgICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gb3BlcmF0aW5nSG91cnMpIHtcclxuICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG5cclxuICAgICAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xyXG4gICAgICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGRheSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xyXG4gICAgICAgIHRpbWUuaW5uZXJIVE1MID0gb3BlcmF0aW5nSG91cnNba2V5XTtcclxuICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGltZSk7XHJcblxyXG4gICAgICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5jb25zdCBmaWxsUmV2aWV3c0hUTUwgPSAocmV2aWV3cyA9IHNlbGYucmVzdGF1cmFudC5yZXZpZXdzKSA9PiB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcclxuICAgIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblxyXG4gICAgaWYgKCFyZXZpZXdzKSB7XHJcbiAgICAgICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcclxuICAgIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xyXG4gICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XHJcbiAgICB9KTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh1bCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNvbnN0IGNyZWF0ZVJldmlld0hUTUwgPSAocmV2aWV3KSA9PiB7XHJcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBsaS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywnMCcpO1xyXG4gICAgXHJcbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgbmFtZS5jbGFzc0xpc3QuYWRkKCduYW1lJyk7XHJcbiAgICBuYW1lLmlubmVySFRNTCA9IHJldmlldy5uYW1lO1xyXG4gICAgbGkuYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIGRhdGUuY2xhc3NMaXN0LmFkZCgnZGF0ZScpO1xyXG4gICAgZGF0ZS5pbm5lckhUTUwgPSByZXZpZXcuZGF0ZTtcclxuICAgIGxpLmFwcGVuZENoaWxkKGRhdGUpO1xyXG5cclxuICAgIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcclxuICAgIHJhdGluZy5jbGFzc0xpc3QuYWRkKCdyYXRpbmcnKTtcclxuICAgIGxpLmFwcGVuZENoaWxkKHJhdGluZyk7XHJcblxyXG4gICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBjb21tZW50cy5pbm5lckhUTUwgPSByZXZpZXcuY29tbWVudHM7XHJcbiAgICBsaS5hcHBlbmRDaGlsZChjb21tZW50cyk7XHJcblxyXG4gICAgcmV0dXJuIGxpO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcclxuICovXHJcbmNvbnN0IGZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSA9PiB7XHJcbiAgICBjb25zdCBicmVhZGNydW1iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyZWFkY3J1bWInKTtcclxuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBcclxuICAgIGEuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsJ2Rpc2FibGVkJyk7XHJcbiAgICBhLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuICAgIGEuaHJlZj0nIyc7XHJcbiAgICBhLnNldEF0dHJpYnV0ZSgnYXJpYS1jdXJyZW50JywncGFnZScpO1xyXG5cclxuICAgIGxpLmFwcGVuZENoaWxkKGEpO1xyXG4gICAgXHJcbiAgICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIHBhcmFtZXRlciBieSBuYW1lIGZyb20gcGFnZSBVUkwuXHJcbiAqL1xyXG5jb25zdCBnZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XHJcbiAgICBpZiAoIXVybClcclxuICAgICAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tbXV0vZywgJ1xcXFwkJicpO1xyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXHJcbiAgICAgICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICAgIGlmICghcmVzdWx0cylcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGlmICghcmVzdWx0c1syXSlcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xyXG59XHJcbiJdfQ==
