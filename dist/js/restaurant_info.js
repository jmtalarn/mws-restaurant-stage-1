let restaurant;var map;window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})});const fetchRestaurantFromURL=e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");if(t)DBHelper.fetchRestaurantById(t,(t,n)=>{self.restaurant=n,n?(fillRestaurantHTML(),e(null,n)):console.error(t)});else{e("No restaurant id in URL",null)}},fillRestaurantHTML=(e=self.restaurant)=>{document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;const t=document.getElementById("restaurant-img");t.setAttribute("alt",`This is a representative image of the restaurant ${e.name}`),t.title=`${e.name}`,t.className="restaurant-img";const n=DBHelper.imageUrlForRestaurant(e);t.src=n,t.srcset=`${n}-small.jpg 320w,\n                                    ${n}-medium.jpg 640w,\n                                    ${n}.jpg 800w`,t.sizes="(max-width: 800px) 100vw, 800px",document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=(e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");for(let n in e){const a=document.createElement("tr"),r=document.createElement("th");r.innerHTML=n,a.appendChild(r);const s=document.createElement("td");s.innerHTML=e[n],a.appendChild(s),t.appendChild(a)}},fillReviewsHTML=(e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const a=document.getElementById("reviews-list");e.forEach(e=>{a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=e=>{const t=document.createElement("li");t.setAttribute("tabindex","0");const n=document.createElement("p");n.classList.add("name"),n.innerHTML=e.name,t.appendChild(n);const a=document.createElement("p");a.classList.add("date"),a.innerHTML=e.date,t.appendChild(a);const r=document.createElement("p");r.innerHTML=`Rating: ${e.rating}`,r.classList.add("rating"),t.appendChild(r);const s=document.createElement("p");return s.innerHTML=e.comments,t.appendChild(s),t},fillBreadcrumb=(e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),n=document.createElement("li"),a=document.createElement("a");a.setAttribute("disabled","disabled"),a.innerHTML=e.name,a.href="#",a.setAttribute("aria-current","page"),n.appendChild(a),t.appendChild(n)},getParameterByName=(e,t)=>{t||(t=window.location.href),e=e.replace(/[[]]/g,"\\$&");const n=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3Jlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJyZXN0YXVyYW50IiwibWFwIiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwibGF0bG5nIiwic2Nyb2xsd2hlZWwiLCJmaWxsQnJlYWRjcnVtYiIsIkRCSGVscGVyIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmZXRjaFJlc3RhdXJhbnRCeUlkIiwiZmlsbFJlc3RhdXJhbnRIVE1MIiwiaW5uZXJIVE1MIiwibmFtZSIsImFkZHJlc3MiLCJpbWFnZSIsInNldEF0dHJpYnV0ZSIsInRpdGxlIiwiY2xhc3NOYW1lIiwiaW1hZ2VTcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJzcmMiLCJzcmNzZXQiLCJzaXplcyIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmlsbFJldmlld3NIVE1MIiwib3BlcmF0aW5nSG91cnMiLCJob3VycyIsImtleSIsInJvdyIsImNyZWF0ZUVsZW1lbnQiLCJkYXkiLCJhcHBlbmRDaGlsZCIsInRpbWUiLCJyZXZpZXdzIiwiY29udGFpbmVyIiwibm9SZXZpZXdzIiwidWwiLCJmb3JFYWNoIiwicmV2aWV3IiwiY3JlYXRlUmV2aWV3SFRNTCIsImxpIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0ZSIsInJhdGluZyIsImNvbW1lbnRzIiwiYnJlYWRjcnVtYiIsImEiLCJocmVmIiwidXJsIiwibG9jYXRpb24iLCJyZXBsYWNlIiwicmVzdWx0cyIsIlJlZ0V4cCIsImV4ZWMiLCJkZWNvZGVVUklDb21wb25lbnQiXSwibWFwcGluZ3MiOiJBQUNBLElB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QkFBdUI2QixFQUFPTSxTQUNyQ0EsRUFBT0gsVUFBVUMsSUFBSSxVQUNyQkYsRUFBR1QsWUFBWWEsR0FFZixNQUFNQyxFQUFXbEQsU0FBU2tDLGNBQWMsS0FJeEMsT0FIQWdCLEVBQVNwQyxVQUFZNkIsRUFBT08sU0FDNUJMLEVBQUdULFlBQVljLEdBRVJMLEdBTUx2QyxlQUFpQixDQUFDakIsRUFBV08sS0FBS1AsY0FDcEMsTUFBTThELEVBQWFuRCxTQUFTQyxlQUFlLGNBQ3JDNEMsRUFBSzdDLFNBQVNrQyxjQUFjLE1BQzVCa0IsRUFBSXBELFNBQVNrQyxjQUFjLEtBRWpDa0IsRUFBRWxDLGFBQWEsV0FBVyxZQUMxQmtDLEVBQUV0QyxVQUFZekIsRUFBVzBCLEtBQ3pCcUMsRUFBRUMsS0FBSyxJQUNQRCxFQUFFbEMsYUFBYSxlQUFlLFFBRTlCMkIsRUFBR1QsWUFBWWdCLEdBRWZELEVBQVdmLFlBQVlTLElBTXJCbEMsbUJBQXFCLENBQUNJLEVBQU11QyxLQUN6QkEsSUFDREEsRUFBTS9ELE9BQU9nRSxTQUFTRixNQUMxQnRDLEVBQU9BLEVBQUt5QyxRQUFRLFFBQVMsUUFDN0IsTUFDSUMsRUFEVSxJQUFJQyxjQUFjM0Msc0JBQ1o0QyxLQUFLTCxHQUN6QixPQUFLRyxFQUVBQSxFQUFRLEdBRU5HLG1CQUFtQkgsRUFBUSxHQUFHRCxRQUFRLE1BQU8sTUFEekMsR0FGQSIsImZpbGUiOiJqcy9yZXN0YXVyYW50X2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBnb29nbGUgREJIZWxwZXIqL1xyXG5sZXQgcmVzdGF1cmFudDtcclxudmFyIG1hcDtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXHJcbiAqL1xyXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcclxuICAgIGZldGNoUmVzdGF1cmFudEZyb21VUkwoKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgICAgICAgICAgICAgem9vbTogMTYsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmaWxsQnJlYWRjcnVtYigpO1xyXG4gICAgICAgICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHNlbGYucmVzdGF1cmFudCwgc2VsZi5tYXApO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cclxuICovXHJcbmNvbnN0IGZldGNoUmVzdGF1cmFudEZyb21VUkwgPSAoY2FsbGJhY2spID0+IHtcclxuICAgIGlmIChzZWxmLnJlc3RhdXJhbnQpIHsgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXHJcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGlkID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xyXG4gICAgaWYgKCFpZCkgeyAvLyBubyBpZCBmb3VuZCBpbiBVUkxcclxuICAgICAgICBjb25zdCBlcnJvciA9ICdObyByZXN0YXVyYW50IGlkIGluIFVSTCdcclxuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xyXG4gICAgICAgICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xyXG4gICAgICAgICAgICBpZiAoIXJlc3RhdXJhbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxyXG4gKi9cclxuY29uc3QgZmlsbFJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcclxuICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XHJcbiAgICBuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuXHJcbiAgICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtYWRkcmVzcycpO1xyXG4gICAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcblxyXG4gICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcclxuICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JyxgVGhpcyBpcyBhIHJlcHJlc2VudGF0aXZlIGltYWdlIG9mIHRoZSByZXN0YXVyYW50ICR7cmVzdGF1cmFudC5uYW1lfWApO1xyXG4gICAgaW1hZ2UudGl0bGU9YCR7cmVzdGF1cmFudC5uYW1lfWA7XHJcbiAgICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnXHJcbiAgICBjb25zdCBpbWFnZVNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICAgIGltYWdlLnNyYyA9IGltYWdlU3JjO1xyXG4gICAgXHJcbiAgICBpbWFnZS5zcmNzZXQgPSBgJHtpbWFnZVNyY30tc21hbGwuanBnIDMyMHcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7aW1hZ2VTcmN9LW1lZGl1bS5qcGcgNjQwdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpbWFnZVNyY30uanBnIDgwMHdgO1xyXG4gICAgaW1hZ2Uuc2l6ZXMgPSBgKG1heC13aWR0aDogODAwcHgpIDEwMHZ3LCA4MDBweGA7XHJcblxyXG4gICAgY29uc3QgY3Vpc2luZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWN1aXNpbmUnKTtcclxuICAgIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XHJcblxyXG4gICAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcclxuICAgIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xyXG4gICAgICAgIGZpbGxSZXN0YXVyYW50SG91cnNIVE1MKCk7XHJcbiAgICB9XHJcbiAgICAvLyBmaWxsIHJldmlld3NcclxuICAgIGZpbGxSZXZpZXdzSFRNTCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgb3BlcmF0aW5nIGhvdXJzIEhUTUwgdGFibGUgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmNvbnN0IGZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKG9wZXJhdGluZ0hvdXJzID0gc2VsZi5yZXN0YXVyYW50Lm9wZXJhdGluZ19ob3VycykgPT4ge1xyXG4gICAgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1ob3VycycpO1xyXG4gICAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XHJcbiAgICAgICAgY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcclxuICAgICAgICBkYXkuaW5uZXJIVE1MID0ga2V5O1xyXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChkYXkpO1xyXG5cclxuICAgICAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcclxuICAgICAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XHJcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xyXG5cclxuICAgICAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXZpZXdzIEhUTUwgYW5kIGFkZCB0aGVtIHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuY29uc3QgZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XHJcbiAgICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICAgIGlmICghcmV2aWV3cykge1xyXG4gICAgICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgICAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XHJcbiAgICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcclxuICAgICAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xyXG4gICAgfSk7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5jb25zdCBjcmVhdGVSZXZpZXdIVE1MID0gKHJldmlldykgPT4ge1xyXG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG4gICAgbGkuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsJzAnKTtcclxuICAgIFxyXG4gICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIG5hbWUuY2xhc3NMaXN0LmFkZCgnbmFtZScpO1xyXG4gICAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcclxuICAgIGxpLmFwcGVuZENoaWxkKG5hbWUpO1xyXG5cclxuICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICBkYXRlLmNsYXNzTGlzdC5hZGQoJ2RhdGUnKTtcclxuICAgIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XHJcbiAgICBsaS5hcHBlbmRDaGlsZChkYXRlKTtcclxuXHJcbiAgICBjb25zdCByYXRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICByYXRpbmcuaW5uZXJIVE1MID0gYFJhdGluZzogJHtyZXZpZXcucmF0aW5nfWA7XHJcbiAgICByYXRpbmcuY2xhc3NMaXN0LmFkZCgncmF0aW5nJyk7XHJcbiAgICBsaS5hcHBlbmRDaGlsZChyYXRpbmcpO1xyXG5cclxuICAgIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xyXG4gICAgbGkuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xyXG5cclxuICAgIHJldHVybiBsaTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XHJcbiAqL1xyXG5jb25zdCBmaWxsQnJlYWRjcnVtYiA9IChyZXN0YXVyYW50PXNlbGYucmVzdGF1cmFudCkgPT4ge1xyXG4gICAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XHJcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgXHJcbiAgICBhLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCdkaXNhYmxlZCcpO1xyXG4gICAgYS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgICBhLmhyZWY9JyMnO1xyXG4gICAgYS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcsJ3BhZ2UnKTtcclxuXHJcbiAgICBsaS5hcHBlbmRDaGlsZChhKTtcclxuICAgIFxyXG4gICAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxyXG4gKi9cclxuY29uc3QgZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xyXG4gICAgaWYgKCF1cmwpXHJcbiAgICAgICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9bW11dL2csICdcXFxcJCYnKTtcclxuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxyXG4gICAgICAgIHJlc3VsdHMgPSByZWdleC5leGVjKHVybCk7XHJcbiAgICBpZiAoIXJlc3VsdHMpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAoIXJlc3VsdHNbMl0pXHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcclxufVxyXG4iXX0=
